@using Masa.Blazor
@using Watermark.Shared.Models
@inherits LayoutComponentBase
@inject IClientInstance ClientInstance

<MudThemeProvider IsDarkMode="@Global.DARK_MODE" />
<MudDialogProvider />
<MudSnackbarProvider />
<div class="page">
    <MApp>
        <MMain>
            <MErrorHandler>
                <PPageStack TabbedPatterns="@(["^/$", "/market", "/settings", "/test"])">
                    <MContainer Style="padding:0px !important;height:calc(100vh - 56px);overflow:hidden">
                        @Body
                    </MContainer>
                </PPageStack>
            </MErrorHandler>
        </MMain>
        <MBottomNavigation @bind-Value="Value"
                           App
                           Grow
                           Shift
                           Color="primary">
            <MButton Href="/">
                <span>我的模板</span>
                <MIcon>mdi-download-box</MIcon>
            </MButton>
            <MButton Href="/market">
                <span>模板市场</span>
                <MIcon>mdi-shopping</MIcon>
            </MButton>
            <MButton Href="/settings">
                <span>我</span>
                <MIcon>mdi-account</MIcon>
            </MButton>
        </MBottomNavigation>
    </MApp>
</div>

<style>
    .m-ripple__container {
        display:none !important;
    }

    .m-btn--active {
        background: #fff !important;
    }

    .m-btn:hover {
        background: #fff !important;
    }
</style>

@code {
    StringNumber v = 0;
    StringNumber Value
    {
        get => v;
        set
        {
            v = value;
            ClientInstance.Haptic();
            StateHasChanged();
        }
    }
}